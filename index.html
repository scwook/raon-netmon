<!DOCTYPE html>
<html lang="en">
<link rel="icon" href="images/favicon.png">
<link rel="stylesheet" type="text/css" href="index.css">

<script src="config.js"></script>
<script src="influxDB.js"></script>
<script src="lineAnimation.js"></script>


<body>
    <div style="margin:auto; position: relative; width:1920px; height:80px;">
        <div id="raon-box">
            <svg>
                <circle class="raonLogo" cx="7.7854" cy="7.7854" r="7.7854" />
                <path class="raonLogo"
                    d="M275.5951,237.9206a14.4381,14.4381,0,1,0,14.2967,14.4365A14.3676,14.3676,0,0,0,275.5951,237.9206Zm0,23.2125a8.78,8.78,0,1,1,8.4931-8.776A8.6381,8.6381,0,0,1,275.5951,261.1331Z"
                    transform="translate(-183.5864 -232.9662)" />
                <rect class="raonLogo" x="56.9286" y="22.2218" width="14.5315" height="4.8127" />
                <path class="raonLogo"
                    d="M248.2542,246.69l-1.1207,2.8376-7.4978,16.9841h-6.2232l12.2847-26.9313a2.8321,2.8321,0,0,1,5.1564,0l12.2848,26.9313h-6.223l-7.498-16.9841-1.1208-2.8376Z"
                    transform="translate(-183.5864 -232.9662)" />
                <path class="raonLogo"
                    d="M298.3774,239.0425a2.8313,2.8313,0,0,0-5.0884,1.7091v25.76h5.6621V252.357l-.0282-4.2446h.0282l3.0654,4.2446,10.2483,13.3162a2.831,2.831,0,0,0,5.0882-1.7089v-25.76h-5.6621V252.357l.0282,4.2465h-.0282l-3.0654-4.2465Z"
                    transform="translate(-183.5864 -232.9662)" />
                <path class="raonLogo"
                    d="M222.4547,252.1667l5.0127,5.4524,7.65,8.8929h-7.5081l-11.1726-13.7666a1.2554,1.2554,0,0,1-.293-.8124,1.2734,1.2734,0,0,1,1.2739-1.2731h7.6439a3.68,3.68,0,1,0,0-7.36H191.3717a2.5479,2.5479,0,0,1,0-5.0957h34.2555a8.8478,8.8478,0,0,1,8.9178,8.7761,8.6837,8.6837,0,0,1-2.8308,6.4122,8.7967,8.7967,0,0,1-6.2992,2.15"
                    transform="translate(-183.5864 -232.9662)" />
            </svg>
        </div>
        <div id="accelerator-control">CS</div>
    </div>

    <div id="network-container-body">
        <div id="background-effect"></div>
        <!-- Center Align Line -->
        <!-- <svg width="1920" height="2" style="position:absolute; top:460px">
            <line x1="0" y1="0" x2="1800" y2="0" style="stroke:rgb(255,0,0);stroke-width:2" />
          </svg> -->

        <div id="left-circle-container">
            <svg id="left-circle" width="72" height="72">
                <circle id="left-circle-inner" cx="36.05" cy="36.27" r="30" />
                <circle id="left-circle-outer" cx="36.05" cy="36.3" r="35" />
            </svg>
        </div>

        <div id="center-circle-container">
            <svg id="center-circle" width="102" height="102">
                <circle id="center-circle-inner" cx="51" cy="51" r="45" />
                <circle id="center-circle-outer" cx="51" cy="51" r="50" />
            </svg>
        </div>

        <div id="right-circle-container">
            <svg id="right-circle" width="72" height="72">
                <circle id="right-circle-inner" cx="36.05" cy="36.27" r="30" />
                <circle id="right-circle-outer" cx="36.05" cy="36.3" r="35" />
            </svg>
        </div>


        <div id="left-network-container">
            <svg id="left-line-group" width="364" height="542" style="position:absolute;top:170px">
                <path id="control-line" d="M116.09,10.04c89.46,0,163.6,260.96,244.84,260.96" />
                <path id="ctrluser-line" d="M68.18,76c87.94,0,210.59,195,292.75,195" />
                <path id="archive1-line" d="M35.02,150.48c86.87,0,240,120.52,325.91,120.52" />
                <path id="scl3-gateway1-line" d="M20.57,230.23c86.32,0,257.56,40.77,342.86,40.77" />
                <path id="scl3-gateway2-line" d="M20.57,311.77c86.32,0,257.56-40.77,342.86-40.77" />
                <path id="archive2-line" d="M35.02,391.52c86.87,0,240-120.52,325.91-120.52" />
                <path id="display-wall-line" d="M68.18,466c87.94,0,210.59-195,292.75-195" />
                <path id="operator-line" d="M116.09,531.96c89.46,0,163.6-260.96,244.84-260.96" />

                <circle id="ctrluser-fill" cx="58.18" cy="76" r="10" />
                <circle id="control-fill" cx="106.1" cy="10.04" r="10" />
                <circle id="display-wall-fill" cx="58.18" cy="466" r="10" />
                <circle id="operator-fill" cx="106.1" cy="531.96" r="10" />

                <rect x="15.02" y="140.48" id="archive1-fill" width="20" height="20" />
                <rect x="0.57" y="220.23" id="scl3-gateway1-fill" width="20" height="20" />
                <rect x="0.57" y="301.77" id="scl3-gateway2-fill" width="20" height="20" />
                <rect x="15.02" y="381.52" id="archive2-fill" width="20" height="20" />
            </svg>
        </div>

        <div id="center-left-network">
            <svg width="322" height="882">
                <style type="text/css">
                    .st0 {
                        fill: #3E3A39;
                    }

                    .st1 {
                        fill: none;
                        stroke: #3E3A39;
                        stroke-linecap: round;
                        stroke-miterlimit: 10;
                        stroke-dasharray: 6;
                    }
                </style>
                <circle class="st0" cx="14.6" cy="127.85" r="12" />
                <circle class="st0" cx="87.31" cy="62.38" r="12" />
                <circle class="st0" cx="172.04" cy="13.46" r="12" />
                <path class="st1" d="M26.59,127.85C133.94,127.85,222.91,441,320.4,441" />
                <path class="st1" d="M99.31,62.38C208.92,62.38,222.87,441,320.4,441" />
                <path class="st1" d="M184.05,13.46C298.11,13.46,203.74,441,320.4,441" />

                <circle class="st0" cx="14.6" cy="754.15" r="12" />
                <circle class="st0" cx="87.31" cy="819.62" r="12" />
                <circle class="st0" cx="172.04" cy="868.54" r="12" />
                <path class="st1" d="M26.59,754.15C133.94,754.15,222.91,441,320.4,441" />
                <path class="st1" d="M99.31,819.62C208.92,819.62,222.87,441,320.4,441" />
                <path class="st1" d="M184.05,868.54C298.11,868.54,203.74,441,320.4,441" />
            </svg>
        </div>

        <div id="center-right-network">
            <svg width="322" height="882">
                <path id="isol-line" d="M296.41,127.85C189.06,127.85,100.09,441,2.6,441" />
                <path id="srf-line" d="M223.69,62.38C114.08,62.38,100.13,441,2.6,441" />
                <path id="cryo-line" d="M138.95,13.46C24.89,13.46,119.26,441,2.6,441" />
                <path id="low-energy-line" d="M296.41,754.15C189.06,754.15,100.09,441,2.6,441" />
                <path id="if-line" d="M223.69,819.62C114.08,819.62,100.13,441,2.6,441" />
                <path id="high-energy-line" d="M138.95,868.54C24.89,868.54,119.26,441,2.6,441" />

                <circle id="isol-fill" cx="150.96" cy="13.46" r="12" />
                <circle id="srf-fill" cx="235.69" cy="62.38" r="12" />
                <circle id="cryo-fill" cx="308.4" cy="127.85" r="12" />
                <circle id="low-energy-fill" cx="308.4" cy="754.15" r="12" />
                <circle id="if-fill" cx="235.69" cy="819.62" r="12" />
                <circle id="high-energy-fill" cx="150.96" cy="868.54" r="12" />
            </svg>
        </div>


        <div id="right-network">
            <svg id="right-line-group" width="364" height="734" style="position:absolute;top:75px;">
                <path id="ccsi1-line" d="M115.44,10.22C20.39,10.22,99.03,366.5,1.82,366.5" />
                <path id="ccs02-line" d="M186.05,50.98C94.71,50.98,83.09,366.5,1.82,366.5" />
                <path id="ccs05-line" d="M246.66,105.54c-89.46,0-163.6,260.96-244.84,260.96" />
                <path id="ccs09-line" d="M294.57,171.5c-87.94,0-210.59,195-292.75,195" />
                <path id="ccs12-line" d="M327.73,245.98c-86.87,0-240,120.52-325.91,120.52" />
                <path id="ccs14-line" d="M342.18,325.73c-86.32,0-257.56,40.77-342.86,40.77" />
                <path id="ccs16-line" d="M342.18,407.27c-86.32,0-257.56-40.77-342.86-40.77" />
                <path id="ccs21-line" d="M327.73,487.02c-86.87,0-240-120.52-325.91-120.52" />
                <path id="ccs24-line" d="M294.57,561.5c-87.94,0-210.59-195-292.75-195" />
                <path id="ccs29-line" d="M246.66,627.46c-89.46,0-163.6-260.96-244.84-260.96" />
                <path id="ccs34-line" d="M186.05,682.02C94.71,682.02,83.09,366.5,1.82,366.5" />
                <path id="ccs40-line" d="M115.44,722.78c-95.05,0-16.41-356.28-113.62-356.28" />

                <circle id="ccsi1-fill" cx="125.45" cy="10.22" r="10" />
                <circle id="ccs02-fill" cx="196.05" cy="50.98" r="10" />
                <circle id="ccs05-fill" cx="256.64" cy="105.54" r="10" />
                <circle id="ccs09-fill" cx="304.57" cy="171.5" r="10" />
                <circle id="ccs12-fill" cx="337.73" cy="245.98" r="10" />
                <circle id="ccs14-fill" cx="354.68" cy="325.73" r="10" />
                <circle id="ccs16-fill" cx="354.68" cy="407.27" r="10" />
                <circle id="ccs21-fill" cx="337.73" cy="487.02" r="10" />
                <circle id="ccs24-fill" cx="304.57" cy="561.5" r="10" />
                <circle id="ccs29-fill" cx="256.64" cy="627.46" r="10" />
                <circle id="ccs34-fill" cx="196.05" cy="682.02" r="10" />
                <circle id="ccs40-fill" cx="125.45" cy="722.78" r="10" />
            </svg>
        </div>

        <svg id="left-line-container" width="360" height="4">
            <path id="left-line" d="M358,2C294.25,2,65,2,2,2" />
        </svg>

        <svg id="right-line-container" width="360" height="4">
            <path id="right-line" d="M358,2C294.25,2,65,2,2,2" />
        </svg>

        <!-- Nework Traffic Text -->
        <!-- Left Text -->
        <div class="networkTextContainer" style="top:162px; left:100px; --delay:2s">
            <div class="networkLeftTitleText">control</div>
            <div class="networkLeftValueText" id="control-value"></div>
        </div>
        <div class="networkTextContainer" style="top:228px; left:55px; --delay:2.1s">
            <div class="networkLeftTitleText">ctrluer</div>
            <div class="networkLeftValueText" id="ctrluser-value"></div>
        </div>
        <div class="networkTextContainer" style="top:302px; left:20px; --delay:2.2s">
            <div class="networkLeftTitleText">Archive 1</div>
            <div class="networkLeftValueText" id="archive1-value"></div>
        </div>
        <div class="networkTextContainer" style="top:382px; left:5px; --delay:2.3s">
            <div class="networkLeftTitleText">SCL3 Gateway 1</div>
            <div class="networkLeftValueText" id="scl3-gateway1-value"></div>
        </div>
        <div class="networkTextContainer" style="top:464px; left:5px; --delay:2.4s">
            <div class="networkLeftTitleText">SCL3 Gateway 2</div>
            <div class="networkLeftValueText" id="scl3-gateway2-value"></div>
        </div>
        <div class="networkTextContainer" style="top:544px; left:20px; --delay:2.5s">
            <div class="networkLeftTitleText">Archive 2</div>
            <div class="networkLeftValueText" id="archive2-value"></div>
        </div>
        <div class="networkTextContainer" style="top:618px; left:55px; --delay:2.6s">
            <div class="networkLeftTitleText">Display Wall</div>
            <div class="networkLeftValueText" id="display-wall-value"></div>
        </div>
        <div class="networkTextContainer" style="top:684px; left:100px; --delay:2.7s">
            <div class="networkLeftTitleText">Operator</div>
            <div class="networkLeftValueText" id="operator-value"></div>
        </div>

        <div class="networkTextContainer" style="top:12px; left:620px">
            <div class="networUnconnectedText">Utility</div>
        </div>
        <div class="networkTextContainer" style="top:64px; left:535px">
            <div class="networUnconnectedText">Plant</div>
        </div>
        <div class="networkTextContainer" style="top:824px; left:535px">
            <div class="networUnconnectedText">SCL3</div>
        </div>
        <div class="networkTextContainer" style="top:872px; left:620px">
            <div class="networUnconnectedText">SCL2</div>
        </div>

        <!-- Right Text -->
        <div class="networkTextContainer" style="top:-4px; left:1178px;">
            <div class="networkRightTitleText">ISOL</div>
            <div class="networkRightValueText" id="isol-value"></div>
        </div>
        <div class="networkTextContainer" style="top:46px; left:1260px">
            <div class="networkRightTitleText">SRF</div>
            <div class="networkRightValueText" id="srf-value"></div>
        </div>
        <div class="networkTextContainer" style="top:112px; left:1334px">
            <div class="networkRightTitleText">Cryo</div>
            <div class="networkRightValueText" id="cryo-value"></div>
        </div>
        <div class="networkTextContainer" style="top:738px; left:1334px">
            <div class="networkRightTitleText">Low Energy</div>
            <div class="networkRightValueText" id="low-energy-value"></div>
        </div>
        <div class="networkTextContainer" style="top:804px; left:1260px">
            <div class="networkRightTitleText">IF</div>
            <div class="networkRightValueText" id="if-value"></div>
        </div>
        <div class="networkTextContainer" style="top:852px; left:1178px">
            <div class="networkRightTitleText">High Energy</div>
            <div class="networkRightValueText" id="high-energy-value"></div>
        </div>

        <div class="networkTextContainer" style="top:66px; left:1564px; --delay:1.5s">
            <div class="networkRightTitleText">CCSI1</div>
            <div class="networkRightValueText" id="ccsi1-value"></div>
        </div>
        <div class="networkTextContainer" style="top:110px; left:1632px; --delay:1.6s">
            <div class="networkRightTitleText">CCS02</div>
            <div class="networkRightValueText" id="ccs02-value"></div>
        </div>
        <div class="networkTextContainer" style="top:164px; left:1696px; --delay:1.7s">
            <div class="networkRightTitleText">CCS05</div>
            <div class="networkRightValueText" id="ccs05-value"></div>
        </div>
        <div class="networkTextContainer" style="top:230px; left:1742px; --delay:1.8s">
            <div class="networkRightTitleText">CCS09</div>
            <div class="networkRightValueText" id="ccs09-value"></div>
        </div>
        <div class="networkTextContainer" style="top:304px; left:1778px; --delay:1.9s">
            <div class="networkRightTitleText">CCS12</div>
            <div class="networkRightValueText" id="ccs12-value"></div>
        </div>
        <div class="networkTextContainer" style="top:384px; left:1794px; --delay:2.0s">
            <div class="networkRightTitleText">CCS14</div>
            <div class="networkRightValueText" id="ccs14-value"></div>
        </div>
        <div class="networkTextContainer" style="top:466px; left:1794px; --delay:2.1s">
            <div class="networkRightTitleText">CCS16</div>
            <div class="networkRightValueText" id="ccs16-value"></div>
        </div>
        <div class="networkTextContainer" style="top:546px; left:1778px; --delay:2.2s">
            <div class="networkRightTitleText">CCS21</div>
            <div class="networkRightValueText" id="ccs21-value"></div>
        </div>
        <div class="networkTextContainer" style="top:620px; left:1742px; --delay:2.3s">
            <div class="networkRightTitleText">CCS24</div>
            <div class="networkRightValueText" id="ccs24-value"></div>
        </div>
        <div class="networkTextContainer" style="top:686px; left:1696px; --delay:2.4s">
            <div class="networkRightTitleText">CCS29</div>
            <div class="networkRightValueText" id="ccs29-value"></div>
        </div>
        <div class="networkTextContainer" style="top:741px; left:1632px; --delay:2.5s">
            <div class="networkRightTitleText">CCS34</div>
            <div class="networkRightValueText" id="ccs34-value"></div>
        </div>
        <div class="networkTextContainer" style="top:782px; left:1564px; --delay:2.6s">
            <div class="networkRightTitleText">CCS40</div>
            <div class="networkRightValueText" id="ccs40-value"></div>
        </div>

        <!-- Uplink Switch Value Text -->
        <div class="networkTextContainer" style="top:420px; left:575px">
            <div class="networkRightValueText" id="left-switch-value"></div>
        </div>
        <div class="networkTextContainer" style="top:420px; left:1230px">
            <div class="networkLeftValueText" id="right-switch-value"></div>
        </div>

        <!-- CPU Value Text -->
        <div id="cpu-valueL">45.4</div>
        <div id="cpu-valueC">69.3</div>
        <div id="cpu-valueR">0.2</div>

    </div>
</body>

<script>
    var documentHidden = true;
    var numberOfData = 20; // second
    var timeInterval = numberOfData * 1000; // millisecond

    // Backbone Switch
    monitorinBackboneSwitch(numberOfData);

    // Server Room S4048 Uplink Switch
    monitoringServerUplinkSwitch(numberOfData);

    // SCL3 Gallery Uplink Switch
    monitoringCCSI1Switch(numberOfData);
    monitoringCCS02Switch(numberOfData);
    monitoringCCS05Switch(numberOfData);
    monitoringCCS09Switch(numberOfData);
    monitoringCCS12Switch(numberOfData);
    monitoringCCS14Switch(numberOfData);
    monitoringCCS16Switch(numberOfData);
    monitoringCCS21Switch(numberOfData);



    window.onload = function () {
        // var id2 = document.getElementById('ccsi1');
        // console.log(id2.getTotalLength());

        // Backbone Switch
        setInterval(monitorinBackboneSwitch, timeInterval, numberOfData);

        // Server Room S4048 Uplink Switch
        setInterval(monitoringServerUplinkSwitch, timeInterval, numberOfData);

        // SCL3 Gallery Uplink Switch
        setInterval(monitoringCCSI1Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS02Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS05Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS09Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS12Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS14Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS16Switch, timeInterval, numberOfData);
        setInterval(monitoringCCS21Switch, timeInterval, numberOfData);

        // setTimeout(test, 5000);

        leftLineShowUp(svgInfo.control, 0);
        leftLineShowUp(svgInfo.ctrluser, 0);
        leftLineShowUp(svgInfo.archive1, 0);
        leftLineShowUp(svgInfo.scl3Gateway1, 0);
        leftLineShowUp(svgInfo.scl3Gateway2, 0);
        leftLineShowUp(svgInfo.archive2, 0);
        leftLineShowUp(svgInfo.displayWall, 0);
        leftLineShowUp(svgInfo.operator, 0);

        rightLineShowUp(svgInfo.ccsi1, 0);
        rightLineShowUp(svgInfo.ccs02, 0);
        rightLineShowUp(svgInfo.ccs05, 0);
        rightLineShowUp(svgInfo.ccs09, 0);
        rightLineShowUp(svgInfo.ccs12, 0);
        rightLineShowUp(svgInfo.ccs14, 0);
        rightLineShowUp(svgInfo.ccs16, 0);
        rightLineShowUp(svgInfo.ccs21, 0);
        rightLineShowUp(svgInfo.ccs24, 0);
        rightLineShowUp(svgInfo.ccs29, 0);
        rightLineShowUp(svgInfo.ccs34, 0);
        rightLineShowUp(svgInfo.ccs40, 0);
    }

    document.addEventListener('visibilitychange', function () {
        if (document.hidden) {
            documentHidden = true;
            console.log('hide');
        } else {
            documentHidden = false;
            console.log('view');
        }
    });

    function changeAnimationDuration(lineID, trafficData, portBandwidth) {
        let id = document.getElementById(lineID);
        let traffic = trafficData;
        let bandwidth = 100 * GByte;

        switch (portBandwidth) {
            case '100G':
                bandwidth = 100 * GByte;
                break;

            case '40G':
                bandwidth = 40 * GByte;
                break;

            case '10G':
                bandwidth = 10 * GByte;
                break;

            case '1G':
                bandwidth = 1 * GByte;
                break;
        }

        let animationTime = 100 - 90 * (traffic / bandwidth);

        if (animationTime < 10) animationTime = 10;

        id.style.animationDuration = animationTime + 's';
    }
</script>

</html>